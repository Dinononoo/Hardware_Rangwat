# ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Source Code ESP32 + MPU6050 + PTFS Distance Sensor + BLE

## ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö
‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏±‡∏î‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢/‡∏Å‡πâ‡∏° (Elevation/Depression Angle) ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ ESP32 ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå MPU6050 ‡πÅ‡∏•‡∏∞ PTFS Distance Sensor ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πà‡∏≤‡∏ô BLE

## ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏Å

### 1. Header Files ‡πÅ‡∏•‡∏∞ Include (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1-12)
```cpp
// ESP32 + MPU6050 + PTFS Distance Sensor + BLE
// ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏£‡∏ß‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏î‡∏¥‡∏ô‡∏ñ‡∏•‡πà‡∏°
#include <Arduino.h>        // ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á Arduino ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ESP32
#include <driver/gpio.h>    // ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° GPIO ‡∏Ç‡∏≠‡∏á ESP32
#include "Wire.h"           // ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ I2C communication
#include "I2Cdev.h"         // ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö I2C devices
#include "MPU6050.h"        // ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå MPU6050
#include "BLEDevice.h"      // ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ BLE ‡∏´‡∏•‡∏±‡∏Å
#include "BLEServer.h"      // ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ BLE Server
#include "BLEUtils.h"       // ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ BLE utilities
#include "BLE2902.h"        // ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ BLE descriptor
#include "esp_bt.h"         // ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ Bluetooth ‡∏Ç‡∏≠‡∏á ESP32
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏Å
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 2**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏î‡∏¥‡∏ô‡∏ñ‡∏•‡πà‡∏°)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 3**: `#include <Arduino.h>` - ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á Arduino ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ‡πÄ‡∏ä‡πà‡∏ô `Serial`, `delay()`, `millis()`, `pinMode()`, `digitalWrite()`
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 4**: `#include <driver/gpio.h>` - ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á ESP32 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° GPIO pins ‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÄ‡∏ä‡πà‡∏ô `gpio_set_drive_capability()`, `gpio_set_pull_mode()`
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 5**: `#include "Wire.h"` - ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£ I2C ‡πÉ‡∏ä‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 6**: `#include "I2Cdev.h"` - ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö I2C devices
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 7**: `#include "MPU6050.h"` - ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå MPU6050 (Accelerometer + Gyroscope)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 8**: `#include "BLEDevice.h"` - ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á BLE ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ESP32
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 9**: `#include "BLEServer.h"` - ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á BLE Server
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 10**: `#include "BLEUtils.h"` - ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 11**: `#include "BLE2902.h"` - ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö BLE Descriptor (‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Notify/Indicate)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 12**: `#include "esp_bt.h"` - ‡πÑ‡∏•‡∏ö‡∏£‡∏≤‡∏£‡∏µ Bluetooth ‡∏Ç‡∏≠‡∏á ESP32 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥

### 2. ‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î Pin Configuration (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 14-22)
```cpp
// ================ ‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î Pin ================
#define SDA_PIN 21  // GPIO21 - ‡πÄ‡∏™‡πâ‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• I2C
#define SCL_PIN 22  // GPIO22 - ‡πÄ‡∏™‡πâ‡∏ô‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤ I2C

// Pin ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á PTFS (‡∏£‡∏∞‡∏ö‡∏ö 3.3V)
#define PTFS_RX_PIN 16  // GPIO16 (RX2) - ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å PTFS TX
#define PTFS_TX_PIN 17  // GPIO17 (TX2) - ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÑ‡∏õ PTFS RX
#define PTFS_PWR_PIN 2  // GPIO2 - ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÑ‡∏ü (‡∏à‡πà‡∏≤‡∏¢ HIGH ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î PTFS)
#define PTFS_RST_PIN 4  // GPIO4 - Reset
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 14**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î Pin
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 15**: `#define SDA_PIN 21` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ GPIO21 ‡πÄ‡∏õ‡πá‡∏ô SDA (Serial Data) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö I2C communication ‡∏Å‡∏±‡∏ö MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 16**: `#define SCL_PIN 22` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ GPIO22 ‡πÄ‡∏õ‡πá‡∏ô SCL (Serial Clock) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö I2C communication ‡∏Å‡∏±‡∏ö MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 17**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 18**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Pin ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PTFS Distance Sensor
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 19**: `#define PTFS_RX_PIN 16` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ GPIO16 ‡πÄ‡∏õ‡πá‡∏ô RX2 (Receive) ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å PTFS sensor
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 20**: `#define PTFS_TX_PIN 17` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ GPIO17 ‡πÄ‡∏õ‡πá‡∏ô TX2 (Transmit) ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á PTFS sensor
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 21**: `#define PTFS_PWR_PIN 2` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ GPIO2 ‡πÄ‡∏õ‡πá‡∏ô Power Enable pin ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î PTFS sensor
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 22**: `#define PTFS_RST_PIN 4` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ GPIO4 ‡πÄ‡∏õ‡πá‡∏ô Reset pin ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï PTFS sensor

### 3. BLE Configuration (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 24-27)
```cpp
// ================ BLE Configuration ================
#define SERVICE_UUID        "4fafc201-1fb5-459e-8fcc-c5c9c331914b"
#define CHARACTERISTIC_UUID "beb5483e-36e1-4688-b7f5-ea07361b26a8"
#define DEVICE_NAME         "ESP32_LANDSLIDE_MOCK"
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 24**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 25**: `#define SERVICE_UUID` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î UUID (Universally Unique Identifier) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö BLE Service ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏∑‡πà‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 26**: `#define CHARACTERISTIC_UUID` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î UUID ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö BLE Characteristic ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏á/‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á ESP32 ‡∏Å‡∏±‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏∑‡πà‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 27**: `#define DEVICE_NAME` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ BLE device (‡∏à‡∏∞‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠)

### 4. Global Variables (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 29-63)
```cpp
// ================ Global Variables ================
MPU6050 mpu;                    // ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå MPU6050
int16_t ax, ay, az, gx, gy, gz; // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å MPU6050

// ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
float ax_filtered = 0, ay_filtered = 0, az_filtered = 0;
float gx_filtered = 0, gy_filtered = 0, gz_filtered = 0;

// ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô 3,000 samples
int16_t ax_offset = 0, ay_offset = 0, az_offset = 0;
int16_t gx_offset = 0, gy_offset = 0, gz_offset = 0;
bool calibrated = false;

// ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏±‡∏î‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û - ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ ¬±0.1¬∞
float elevation_raw = 0.0;           // ‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏î‡∏¥‡∏ö‡∏à‡∏≤‡∏Å accelerometer
float elevation_gyro = 0.0;          // ‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏à‡∏≤‡∏Å gyroscope integration
float elevation_complementary = 0.0; // ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏à‡∏≤‡∏Å complementary filter
float elevation_previous = 0.0;      // ‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤

// ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå Complementary Filter (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û)
const float ALPHA = 0.98;            // ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å gyroscope (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏™‡∏π‡∏á)
const float BETA = 0.02;             // ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å accelerometer (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏ï‡πà‡∏≥)
const float GYRO_SENSITIVITY = 131.0; // LSB/¬∞/s ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á ¬±250¬∞/s
const float DT = 0.01;               // ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 100 Hz (10ms)

// ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
float data_quality_score = 0.0;      // ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û 0-100%
float acceleration_magnitude = 0.0;  // ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏£‡∏ß‡∏°
float gyro_magnitude = 0.0;          // ‡∏Ç‡∏ô‡∏≤‡∏î gyro ‡∏£‡∏ß‡∏°
bool high_quality_data = false;      // ‡∏ü‡∏•‡∏≤‡∏Å‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û

// ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
unsigned long last_sample_time = 0;
const unsigned long SAMPLE_INTERVAL = 10; // 100 Hz = 10ms interval
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 29**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ Global
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 30**: `MPU6050 mpu;` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏ (object) ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏•‡∏≤‡∏™ MPU6050 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 31**: `int16_t ax, ay, az, gx, gy, gz;` - ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö‡∏à‡∏≤‡∏Å MPU6050 (ax,ay,az = accelerometer, gx,gy,gz = gyroscope)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 32**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 33**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 34**: `float ax_filtered = 0, ay_filtered = 0, az_filtered = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• accelerometer ‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 35**: `float gx_filtered = 0, gy_filtered = 0, gz_filtered = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• gyroscope ‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 36**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 37**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 38**: `int16_t ax_offset = 0, ay_offset = 0, az_offset = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á accelerometer ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 39**: `int16_t gx_offset = 0, gy_offset = 0, gz_offset = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á gyroscope ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 40**: `bool calibrated = false;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 41**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 42**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏±‡∏î‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 43**: `float elevation_raw = 0.0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏î‡∏¥‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å accelerometer
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 44**: `float elevation_gyro = 0.0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• gyroscope
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 45**: `float elevation_complementary = 0.0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏à‡∏≤‡∏Å complementary filter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 46**: `float elevation_previous = 0.0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 47**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 48**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå Complementary Filter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 49**: `const float ALPHA = 0.98;` - ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏Ç‡∏≠‡∏á gyroscope (98%) ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 50**: `const float BETA = 0.02;` - ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏Ç‡∏≠‡∏á accelerometer (2%) ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 51**: `const float GYRO_SENSITIVITY = 131.0;` - ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• gyroscope ‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏á‡∏®‡∏≤‡∏ï‡πà‡∏≠‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 52**: `const float DT = 0.01;` - ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (10ms = 100Hz)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 53**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 54**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 55**: `float data_quality_score = 0.0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (0-100%)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 56**: `float acceleration_magnitude = 0.0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏£‡∏ß‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 57**: `float gyro_magnitude = 0.0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå gyroscope ‡∏£‡∏ß‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 58**: `bool high_quality_data = false;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 59**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 60**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 61**: `unsigned long last_sample_time = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 62**: `const unsigned long SAMPLE_INTERVAL = 10;` - ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (10ms)

### 5. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 66-97)
```cpp
float calculateDataQuality(float ax, float ay, float az, float gx, float gy, float gz) {
    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á (‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô ~1g ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏¥‡πà‡∏á)
    acceleration_magnitude = sqrt(ax*ax + ay*ay + az*az);
    
    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î gyroscope (‡∏Ñ‡∏ß‡∏£‡∏ï‡πà‡∏≥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏¥‡πà‡∏á)
    gyro_magnitude = sqrt(gx*gx + gy*gy + gz*gz);
    
    // ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢
    float quality = 100.0;
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á (‡∏Ñ‡∏ß‡∏£‡πÉ‡∏Å‡∏•‡πâ 1g)
    float accel_error = abs(acceleration_magnitude - 1.0);
    if (accel_error > 0.1) {
        quality -= accel_error * 200; // ‡∏•‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥
    }
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î gyroscope (‡∏Ñ‡∏ß‡∏£‡∏ï‡πà‡∏≥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏¥‡πà‡∏á)
    if (gyro_magnitude > 50.0) { // ‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡∏™‡∏π‡∏á
        quality -= (gyro_magnitude - 50.0) * 0.5; // ‡∏•‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏∏‡∏ô‡∏°‡∏≤‡∏Å
    }
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏°‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏°‡∏ú‡∏•
    if (acceleration_magnitude < 0.5 || acceleration_magnitude > 2.0) {
        quality = 0.0; // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
    }
    
    // ‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 0-100%
    if (quality < 0.0) quality = 0.0;
    if (quality > 100.0) quality = 100.0;
    
    return quality;
}
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 66**: `float calculateDataQuality(...)` - ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå 6 ‡∏ï‡∏±‡∏ß (ax,ay,az,gx,gy,gz) ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô float
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 67**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 68**: `acceleration_magnitude = sqrt(ax*ax + ay*ay + az*az);` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏£‡∏ß‡∏°‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏™‡∏π‡∏ï‡∏£ ‚àö(x¬≤+y¬≤+z¬≤)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 69**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 70**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î gyroscope
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 71**: `gyro_magnitude = sqrt(gx*gx + gy*gy + gz*gz);` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå gyroscope ‡∏£‡∏ß‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 72**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 73**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 74**: `float quality = 100.0;` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 100% (‡πÄ‡∏ï‡πá‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 75**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 76**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 77**: `float accel_error = abs(acceleration_magnitude - 1.0);` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏Å‡∏±‡∏ö 1g (‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏¥‡πà‡∏á)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 78**: `if (accel_error > 0.1) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô 0.1g ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 79**: `quality -= accel_error * 200;` - ‡∏•‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î (‡∏Ñ‡∏π‡∏ì 200 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 80**: `}` - ‡∏õ‡∏¥‡∏î if statement
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 81**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 82**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î gyroscope
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 83**: `if (gyro_magnitude > 50.0) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô 50¬∞/s ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏Ñ‡πà‡∏≤‡∏™‡∏π‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 84**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡∏™‡∏π‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 85**: `quality -= (gyro_magnitude - 50.0) * 0.5;` - ‡∏•‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô 50¬∞/s
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 86**: `}` - ‡∏õ‡∏¥‡∏î if statement
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 87**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 88**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏°‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏°‡∏ú‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 89**: `if (acceleration_magnitude < 0.5 || acceleration_magnitude > 2.0) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á 0.5-2.0g ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 90**: `quality = 0.0;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡πá‡∏ô 0% ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 91**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 92**: `}` - ‡∏õ‡∏¥‡∏î if statement
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 93**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 94**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 95**: `if (quality < 0.0) quality = 0.0;` - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏¥‡∏î‡∏•‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 96**: `if (quality > 100.0) quality = 100.0;` - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô 100%
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 97**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 98**: `return quality;` - ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 99**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô

### 6. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Complementary Filter (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 100-111)
```cpp
float applyComplementaryFilter(float accel_angle, float gyro_rate, float dt) {
    // ‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• gyroscope (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏™‡∏π‡∏á, ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏£‡∏∞‡∏¢‡∏∞‡∏™‡∏±‡πâ‡∏ô)
    elevation_gyro = elevation_previous + gyro_rate * dt;
    
    // Complementary filter: ‡∏£‡∏ß‡∏° accelerometer (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏ï‡πà‡∏≥) + gyroscope (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏™‡∏π‡∏á)
    elevation_complementary = ALPHA * elevation_gyro + BETA * accel_angle;
    
    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏ô‡∏ã‡πâ‡∏≥‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
    elevation_previous = elevation_complementary;
    
    return elevation_complementary;
}
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 100**: `float applyComplementaryFilter(...)` - ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå 3 ‡∏ï‡∏±‡∏ß (accel_angle, gyro_rate, dt) ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô float
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 101**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• gyroscope
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 102**: `elevation_gyro = elevation_previous + gyro_rate * dt;` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏à‡∏≤‡∏Å gyroscope ‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏° (integration) ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡∏Ñ‡∏π‡∏ì‡πÄ‡∏ß‡∏•‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 103**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 104**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Complementary filter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 105**: `elevation_complementary = ALPHA * elevation_gyro + BETA * accel_angle;` - ‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å gyroscope (98%) ‡πÅ‡∏•‡∏∞ accelerometer (2%) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 106**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 107**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 108**: `elevation_previous = elevation_complementary;` - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 109**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 110**: `return elevation_complementary;` - ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å complementary filter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 111**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô

### 7. ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ BLE ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 113-135)
```cpp
// ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ BLE
BLEServer* pServer = NULL;
BLECharacteristic* pCharacteristic = NULL;
bool deviceConnected = false;
bool oldDeviceConnected = false;

// ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
float distance = 0.0;  // ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å PTFS sensor
int currentMode = 1;
unsigned long lastSendTime = 0;
const long sendInterval = 1000;  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 500ms ‡πÄ‡∏õ‡πá‡∏ô 1000ms ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
bool mpu6050Healthy = false;
bool ptfsHealthy = false;
bool bleHealthy = false;
unsigned long lastMPU6050Check = 0;
unsigned long lastPTFSCheck = 0;
unsigned long lastBLECheck = 0;
const unsigned long healthCheckInterval = 5000; // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
int errorCount = 0;
const int maxErrorCount = 10; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 113**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 114**: `BLEServer* pServer = NULL;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ pointer ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö BLE Server (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô NULL)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 115**: `BLECharacteristic* pCharacteristic = NULL;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ pointer ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö BLE Characteristic (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô NULL)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 116**: `bool deviceConnected = false;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ BLE ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 117**: `bool oldDeviceConnected = false;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 118**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 119**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 120**: `float distance = 0.0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å PTFS sensor (‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏°‡∏ï‡∏£)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 121**: `int currentMode = 1;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏°‡∏î 1)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 122**: `unsigned long lastSendTime = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• BLE ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 123**: `const long sendInterval = 1000;` - ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• BLE (1000ms = 1‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 124**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 125**: `bool mpu6050Healthy = false;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ MPU6050 ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 126**: `bool ptfsHealthy = false;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ PTFS sensor ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 127**: `bool bleHealthy = false;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ BLE ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 128**: `unsigned long lastMPU6050Check = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö MPU6050 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 129**: `unsigned long lastPTFSCheck = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö PTFS ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 130**: `unsigned long lastBLECheck = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö BLE ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 131**: `const unsigned long healthCheckInterval = 5000;` - ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏£‡∏∞‡∏ö‡∏ö (5000ms = 5‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 132**: `int errorCount = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 133**: `const int maxErrorCount = 10;` - ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏∞‡∏ö‡∏ö

### 8. ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ PTFS (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 136-151)
```cpp
// ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ PTFS
uint8_t ptfsBuffer[200];
int ptfsBufferIndex = 0;
bool ptfsMeasurementActive = false;
bool loopbackDetected = false;  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö loopback
unsigned long lastPTFSCommand = 0;
unsigned long lastPTFSAnalysis = 0;
unsigned long lastPTFSDisplayTime = 0;
const unsigned long ptfsCommandInterval = 2000;  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£
const unsigned long ptfsAnalysisInterval = 1000;  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£

// ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£)
#define DISTANCE_FILTER_SIZE 30  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 20 ‡πÄ‡∏õ‡πá‡∏ô 30
float distanceHistory[DISTANCE_FILTER_SIZE] = {0};
int distanceFilterIndex = 0;
bool distanceFilterFull = false;
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 136**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 137**: `uint8_t ptfsBuffer[200];` - ‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå‡∏Ç‡∏ô‡∏≤‡∏î 200 bytes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å PTFS sensor
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 138**: `int ptfsBufferIndex = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ô‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 139**: `bool ptfsMeasurementActive = false;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ PTFS ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 140**: `bool loopbackDetected = false;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á (loopback)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 141**: `unsigned long lastPTFSCommand = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á PTFS ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 142**: `unsigned long lastPTFSAnalysis = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 143**: `unsigned long lastPTFSDisplayTime = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 144**: `const unsigned long ptfsCommandInterval = 2000;` - ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á PTFS (2000ms = 2‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 145**: `const unsigned long ptfsAnalysisInterval = 1000;` - ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS (1000ms = 1‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 146**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 147**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 148**: `#define DISTANCE_FILTER_SIZE 30` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô 30 samples
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 149**: `float distanceHistory[DISTANCE_FILTER_SIZE] = {0};` - ‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á 30 ‡∏Ñ‡πà‡∏≤ (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô 0)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 150**: `int distanceFilterIndex = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 151**: `bool distanceFilterFull = false;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### 9. BLE Callbacks (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 153-180)
```cpp
// ================ BLE Callbacks ================
class MyServerCallbacks: public BLEServerCallbacks {
    void onConnect(BLEServer* pServer) {
        deviceConnected = true;
        Serial.println("üîµ ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠!");
    };

    void onDisconnect(BLEServer* pServer) {
        deviceConnected = false;
        Serial.println("üî¥ ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ï‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠!");
    }
};

class MyCharacteristicCallbacks: public BLECharacteristicCallbacks {
    void onWrite(BLECharacteristic *pCharacteristic) {
        uint8_t* data = pCharacteristic->getData();
        size_t len = pCharacteristic->getLength();
        String value = "";
        for (int i = 0; i < len; i++) {
            value += (char)data[i];
        }
        Serial.print("‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á: ");
        Serial.println(value);

        if (value == "MODE1") currentMode = 1;
        else if (value == "MODE2") currentMode = 2;
    }
};
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 153**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö BLE Callbacks
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 154**: `class MyServerCallbacks: public BLEServerCallbacks {` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏•‡∏≤‡∏™‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå BLE Server
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 155**: `void onConnect(BLEServer* pServer) {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 156**: `deviceConnected = true;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô true
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 157**: `Serial.println("üîµ ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠!");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 158**: `};` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô onConnect
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 159**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 160**: `void onDisconnect(BLEServer* pServer) {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ï‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 161**: `deviceConnected = false;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô false
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 162**: `Serial.println("üî¥ ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ï‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠!");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ï‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 163**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô onDisconnect
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 164**: `};` - ‡∏õ‡∏¥‡∏î‡∏Ñ‡∏•‡∏≤‡∏™ MyServerCallbacks
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 165**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 166**: `class MyCharacteristicCallbacks: public BLECharacteristicCallbacks {` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏•‡∏≤‡∏™‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå BLE Characteristic
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 167**: `void onWrite(BLECharacteristic *pCharacteristic) {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏°‡∏≤‡∏ó‡∏µ‡πà BLE Characteristic
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 168**: `uint8_t* data = pCharacteristic->getData();` - ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏°‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 169**: `size_t len = pCharacteristic->getLength();` - ‡∏î‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 170**: `String value = "";` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ String ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 171**: `for (int i = 0; i < len; i++) {` - ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô String
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 172**: `value += (char)data[i];` - ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ï‡πà‡∏•‡∏∞ byte ‡πÄ‡∏õ‡πá‡∏ô char ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ String
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 173**: `}` - ‡∏õ‡∏¥‡∏î for loop
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 174**: `Serial.print("‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á: ");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á: "
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 175**: `Serial.println(value);` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏°‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 176**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 177**: `if (value == "MODE1") currentMode = 1;` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô "MODE1" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ currentMode ‡πÄ‡∏õ‡πá‡∏ô 1
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 178**: `else if (value == "MODE2") currentMode = 2;` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô "MODE2" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ currentMode ‡πÄ‡∏õ‡πá‡∏ô 2
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 179**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô onWrite
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 180**: `};` - ‡∏õ‡∏¥‡∏î‡∏Ñ‡∏•‡∏≤‡∏™ MyCharacteristicCallbacks

### 10. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 182-248)
```cpp
// ================ System Health Monitoring ================
bool checkMPU6050Health() {
    if (mpu.testConnection()) {
        mpu6050Healthy = true;
        return true;
    } else {
        mpu6050Healthy = false;
        Serial.println("‚ùå MPU6050 Health Check Failed!");
        return false;
    }
}

bool checkPTFSHealth() {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏à‡∏≤‡∏Å PTFS ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
    if (millis() - lastPTFSAnalysis < 10000) { // 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        ptfsHealthy = true;
        return true;
    } else {
        ptfsHealthy = false;
        Serial.println("‚ö†Ô∏è PTFS Health Check Failed - No Response!");
        return false;
    }
}

bool checkBLEHealth() {
    if (pServer && pCharacteristic) {
        bleHealthy = true;
        return true;
    } else {
        bleHealthy = false;
        Serial.println("‚ùå BLE Health Check Failed!");
        return false;
    }
}

void performHealthCheck() {
    static unsigned long lastHealthCheck = 0;
    
    if (millis() - lastHealthCheck >= healthCheckInterval) {
        bool mpuOK = checkMPU6050Health();
        bool ptfsOK = checkPTFSHealth();
        bool bleOK = checkBLEHealth();
        
        // ‡∏ô‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
        if (!mpuOK || !ptfsOK || !bleOK) {
            errorCount++;
            Serial.printf("‚ö†Ô∏è Health Check Failed! Error Count: %d/%d\n", errorCount, maxErrorCount);
            
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
            if (errorCount >= maxErrorCount) {
                Serial.println("üîÑ Too Many Errors - Restarting System...");
                ESP.restart();
            }
        } else {
            errorCount = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥
        Serial.printf("üíæ Free Heap: %d bytes\n", ESP.getFreeHeap());
        if (ESP.getFreeHeap() < 10000) {
            Serial.println("‚ö†Ô∏è Low Memory Warning!");
        }
        
        lastHealthCheck = millis();
    }
}
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 182**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö System Health Monitoring
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 183**: `bool checkMPU6050Health() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 184**: `if (mpu.testConnection()) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 185**: `mpu6050Healthy = true;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ MPU6050 ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 186**: `return true;` - ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ true ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 187**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 188**: `mpu6050Healthy = false;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ MPU6050 ‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 189**: `Serial.println("‚ùå MPU6050 Health Check Failed!");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 190**: `return false;` - ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ false ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 191**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 192**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô checkMPU6050Health
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 193**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 194**: `bool checkPTFSHealth() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 195**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏à‡∏≤‡∏Å PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 196**: `if (millis() - lastPTFSAnalysis < 10000) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS ‡πÉ‡∏ô 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 197**: `ptfsHealthy = true;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ PTFS ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 198**: `return true;` - ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ true ‡πÄ‡∏°‡∏∑‡πà‡∏≠ PTFS ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 199**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà PTFS ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 200**: `ptfsHealthy = false;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ PTFS ‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 201**: `Serial.println("‚ö†Ô∏è PTFS Health Check Failed - No Response!");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 202**: `return false;` - ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ false ‡πÄ‡∏°‡∏∑‡πà‡∏≠ PTFS ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 203**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 204**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô checkPTFSHealth
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 205**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 206**: `bool checkBLEHealth() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 207**: `if (pServer && pCharacteristic) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ BLE Server ‡πÅ‡∏•‡∏∞ Characteristic ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 208**: `bleHealthy = true;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ BLE ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 209**: `return true;` - ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ true ‡πÄ‡∏°‡∏∑‡πà‡∏≠ BLE ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 210**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà BLE ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 211**: `bleHealthy = false;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ BLE ‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 212**: `Serial.println("‚ùå BLE Health Check Failed!");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 213**: `return false;` - ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ false ‡πÄ‡∏°‡∏∑‡πà‡∏≠ BLE ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 214**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 215**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô checkBLEHealth
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 216**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 217**: `void performHealthCheck() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 218**: `static unsigned long lastHealthCheck = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 219**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 220**: `if (millis() - lastHealthCheck >= healthCheckInterval) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 221**: `bool mpuOK = checkMPU6050Health();` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 222**: `bool ptfsOK = checkPTFSHealth();` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 223**: `bool bleOK = checkBLEHealth();` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 224**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 225**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 226**: `if (!mpuOK || !ptfsOK || !bleOK) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 227**: `errorCount++;` - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 228**: `Serial.printf("‚ö†Ô∏è Health Check Failed! Error Count: %d/%d\n", errorCount, maxErrorCount);` - ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 229**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 230**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏∞‡∏ö‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 231**: `if (errorCount >= maxErrorCount) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏Å‡∏¥‡∏ô‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 232**: `Serial.println("üîÑ Too Many Errors - Restarting System...");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏∞‡∏ö‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 233**: `ESP.restart();` - ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï ESP32
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 234**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 235**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 236**: `errorCount = 0;` - ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 237**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 238**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 239**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 240**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 241**: `Serial.printf("üíæ Free Heap: %d bytes\n", ESP.getFreeHeap());` - ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 242**: `if (ESP.getFreeHeap() < 10000) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡∏ß‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 10KB ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 243**: `Serial.println("‚ö†Ô∏è Low Memory Warning!");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡∏ï‡πà‡∏≥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 244**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 245**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 246**: `lastHealthCheck = millis();` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 247**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 248**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô performHealthCheck

### 11. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô PTFS (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 250-604)
```cpp
// ================ PTFS Functions ================
void sendPTFSCommand(uint8_t* cmd, uint8_t length) {
    for (int i = 0; i < length; i++) {
        Serial2.write(cmd[i]);
        delayMicroseconds(100);
    }
    Serial2.flush();
}

void startPTFSMeasurement() {
    if (!ptfsMeasurementActive) {
        return;
    }
    
    // ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á PTFS Protocol ‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (‡πÑ‡∏°‡πà‡∏™‡∏±‡∏ö‡∏™‡∏ô)
    uint8_t startCmd[] = {
        0xFA,           // MsgType
        0x01,           // MsgCode (Start)
        0x00,           // BrdId (broadcast)
        0x04,           // PayLoadLen
        0x01, 0x00,     // MeaType (start measurement)
        0x00, 0x00,     // MeaTimes (unlimited)
        0x00            // CRC
    };
    
    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì CRC
    uint8_t crc = 0;
    for (int i = 0; i < 8; i++) {
        crc += startCmd[i];
    }
    startCmd[8] = crc & 0xFF;
    
    // ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á
    sendPTFSCommand(startCmd, 9);
}

void addDistanceToFilter(float value) {
    distanceHistory[distanceFilterIndex] = value;
    distanceFilterIndex = (distanceFilterIndex + 1) % DISTANCE_FILTER_SIZE;
    
    if (!distanceFilterFull && distanceFilterIndex == 0) {
        distanceFilterFull = true;
    }
}

void clearDistanceFilter() {
    for (int i = 0; i < DISTANCE_FILTER_SIZE; i++) {
        distanceHistory[i] = 0.0;
    }
    distanceFilterIndex = 0;
    distanceFilterFull = false;
}

float getFilteredDistance() {
    if (!distanceFilterFull && distanceFilterIndex == 0) return 0.0;
    
    float sum = 0;
    int count = distanceFilterFull ? DISTANCE_FILTER_SIZE : distanceFilterIndex;
    
    for (int i = 0; i < count; i++) {
        sum += distanceHistory[i];
    }
    
    return (count > 0) ? sum / count : 0.0;
}

void addDistance(uint16_t* distances, int* counts, int* foundCount, uint16_t value, int maxSize) {
    // ‡∏´‡∏≤‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    for (int i = 0; i < *foundCount; i++) {
        if (distances[i] == value) {
            counts[i]++;
            return;
        }
    }
    
    // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
    if (*foundCount < maxSize) {
        distances[*foundCount] = value;
        counts[*foundCount] = 1;
        (*foundCount)++;
    }
}
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 250**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PTFS Functions
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 251**: `void sendPTFSCommand(uint8_t* cmd, uint8_t length) {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á PTFS sensor
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 252**: `for (int i = 0; i < length; i++) {` - ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ï‡πà‡∏•‡∏∞ byte
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 253**: `Serial2.write(cmd[i]);` - ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ï‡πà‡∏•‡∏∞ byte ‡∏ú‡πà‡∏≤‡∏ô UART2
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 254**: `delayMicroseconds(100);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 100 ‡πÑ‡∏°‡πÇ‡∏Ñ‡∏£‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 255**: `}` - ‡∏õ‡∏¥‡∏î for loop
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 256**: `Serial2.flush();` - ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 257**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô sendPTFSCommand
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 258**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 259**: `void startPTFSMeasurement() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 260**: `if (!ptfsMeasurementActive) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ PTFS ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 261**: `return;` - ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ñ‡πâ‡∏≤ PTFS ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 262**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 263**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 264**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á PTFS Protocol
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 265**: `uint8_t startCmd[] = {` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 266**: `0xFA,` - MsgType (‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 267**: `0x01,` - MsgCode (‡∏£‡∏´‡∏±‡∏™‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° - Start)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 268**: `0x00,` - BrdId (‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏≠‡∏£‡πå‡∏î - broadcast)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 269**: `0x04,` - PayLoadLen (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 270**: `0x01, 0x00,` - MeaType (‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î - start measurement)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 271**: `0x00, 0x00,` - MeaTimes (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î - unlimited)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 272**: `0x00` - CRC (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô 0)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 273**: `};` - ‡∏õ‡∏¥‡∏î‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 274**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 275**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì CRC
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 276**: `uint8_t crc = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤ CRC
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 277**: `for (int i = 0; i < 8; i++) {` - ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì CRC ‡∏à‡∏≤‡∏Å 8 bytes ‡πÅ‡∏£‡∏Å
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 278**: `crc += startCmd[i];` - ‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞ byte ‡πÄ‡∏Ç‡πâ‡∏≤ CRC
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 279**: `}` - ‡∏õ‡∏¥‡∏î for loop
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 280**: `startCmd[8] = crc & 0xFF;` - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤ CRC ‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà 8
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 281**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 282**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 283**: `sendPTFSCommand(startCmd, 9);` - ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á 9 bytes ‡πÑ‡∏õ‡∏¢‡∏±‡∏á PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 284**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô startPTFSMeasurement
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 285**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 286**: `void addDistanceToFilter(float value) {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 287**: `distanceHistory[distanceFilterIndex] = value;` - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 288**: `distanceFilterIndex = (distanceFilterIndex + 1) % DISTANCE_FILTER_SIZE;` - ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 289**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 290**: `if (!distanceFilterFull && distanceFilterIndex == 0) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 291**: `distanceFilterFull = true;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ï‡πá‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 292**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 293**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô addDistanceToFilter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 294**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 295**: `void clearDistanceFilter() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 296**: `for (int i = 0; i < DISTANCE_FILTER_SIZE; i++) {` - ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 297**: `distanceHistory[i] = 0.0;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô 0
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 298**: `}` - ‡∏õ‡∏¥‡∏î for loop
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 299**: `distanceFilterIndex = 0;` - ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 300**: `distanceFilterFull = false;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏ï‡πá‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 301**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô clearDistanceFilter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 302**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 303**: `float getFilteredDistance() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 304**: `if (!distanceFilterFull && distanceFilterIndex == 0) return 0.0;` - ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ 0 ‡∏ñ‡πâ‡∏≤‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏¢‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 305**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 306**: `float sum = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏£‡∏ß‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 307**: `int count = distanceFilterFull ? DISTANCE_FILTER_SIZE : distanceFilterIndex;` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 308**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 309**: `for (int i = 0; i < count; i++) {` - ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡∏•‡∏£‡∏ß‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 310**: `sum += distanceHistory[i];` - ‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 311**: `}` - ‡∏õ‡∏¥‡∏î for loop
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 312**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 313**: `return (count > 0) ? sum / count : 0.0;` - ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏´‡∏£‡∏∑‡∏≠ 0 ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 314**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô getFilteredDistance
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 315**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 316**: `void addDistance(uint16_t* distances, int* counts, int* foundCount, uint16_t value, int maxSize) {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÉ‡∏ô‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 317**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 318**: `for (int i = 0; i < *foundCount; i++) {` - ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 319**: `if (distances[i] == value) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡∏ã‡πâ‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 320**: `counts[i]++;` - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 321**: `return;` - ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 322**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 323**: `}` - ‡∏õ‡∏¥‡∏î for loop
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 324**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 325**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 326**: `if (*foundCount < maxSize) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 327**: `distances[*foundCount] = value;` - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 328**: `counts[*foundCount] = 1;` - ‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏ö‡πÄ‡∏õ‡πá‡∏ô 1
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 329**: `(*foundCount)++;` - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 330**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 331**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô addDistance

### 12. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 338-567)
```cpp
void processPTFSData(uint8_t* data, uint8_t length) {
    // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô loopback data ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏Ç‡∏∂‡πâ‡∏ô)
    if (length > 10 && data[0] == 0xFA) {
        return; // ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏Å‡πÅ‡∏•‡πâ‡∏ß
    }

    // ‡∏•‡∏≠‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏°‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡πâ‡∏≠‡∏¢
    if (length < 3) return; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 1 ‡πÄ‡∏õ‡πá‡∏ô 3
    
    // ‡πÉ‡∏ä‡πâ Map/Counter ‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
    const int maxDistances = 20;
    uint16_t distances[maxDistances];
    int distanceCount[maxDistances];
    int foundDistances = 0;
    
    // PTFS Official Protocol - Table 5-2 Measurement Report
    // Format: 0xFB 0x03 BrdId 0x04 DataValidInd Distance_L Distance_H CRC
    
    // Pattern 1: PTFS Standard Protocol (‡∏ï‡∏≤‡∏°‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠)
    for (int i = 0; i <= length - 8; i++) {
        if (data[i] == 0xFB && data[i+1] == 0x03 && data[i+3] == 0x04) {
            uint8_t dataValid = data[i+4];  // DataValidInd (1=valid, 0=invalid)
            
            if (dataValid == 1) {  // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                // Distance in Little Endian format (dm)
                uint16_t dm_value = data[i+6] | (data[i+7] << 8);
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                if (dm_value >= 30 && dm_value <= 10000) {  // 3m-1000m
                    addDistance(distances, distanceCount, &foundDistances, dm_value, maxDistances);
                } else if (dm_value == 0) {
                    // ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á 0m = ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏ß‡∏±‡∏î
                } else {
                    // ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                }
            } else {
                // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
            }
        }
    }
    
    // ‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠
    int bestDm = 0;
    int bestCount = 0;
    for (int i = 0; i < foundDistances; i++) {
        if (distanceCount[i] > bestCount && distanceCount[i] >= 5) { // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 3 ‡πÄ‡∏õ‡πá‡∏ô 5
            bestCount = distanceCount[i];
            bestDm = distances[i];
        }
    }
    
    // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ô
    if (bestDm == 0 && foundDistances > 0) {
        uint32_t sum = 0;
        int count = 0;
        uint16_t refValue = distances[0];
        
        // ‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ô (‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 20dm = 2m)
        for (int i = 0; i < foundDistances; i++) {
            if (abs((int)distances[i] - (int)refValue) <= 20) {
                sum += distances[i];
                count++;
            }
        }
        
        if (count >= 2) {
            bestDm = sum / count; // ‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£
        } else {
            bestDm = distances[0]; // ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏Å
        }
    }
    
    // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡∏û‡∏£‡πâ‡∏≠‡∏° Moving Average Filter)
    if (bestDm > 0) {
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        if (bestDm < 30) { // ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 3.0m
            // ‡∏•‡πâ‡∏≤‡∏á Filter ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô 0 ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 3m
            clearDistanceFilter();
            distance = 0.0;
        } else {
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Moving Average Filter
            float meters = bestDm / 10.0;
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏°‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏°‡∏ú‡∏•
            if (meters > 0 && meters < 1000) {
                addDistanceToFilter(meters);
                distance = getFilteredDistance();
            } else {
                // ‡∏•‡πâ‡∏≤‡∏á Filter ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô 0 ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏°‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏°‡∏ú‡∏•
                clearDistanceFilter();
                distance = 0.0;
            }
        }
    } else {
        // ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á - ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô 0m
        clearDistanceFilter();
        distance = 0.0;
    }
}
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 338**: `void processPTFSData(uint8_t* data, uint8_t length) {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å PTFS sensor
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 339**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö loopback data
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 340**: `if (length > 10 && data[0] == 0xFA) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô loopback ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 341**: `return;` - ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô loopback
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 342**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 343**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 344**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 345**: `if (length < 3) return;` - ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 346**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 1 ‡πÄ‡∏õ‡πá‡∏ô 3
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 347**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 348**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Map/Counter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 349**: `const int maxDistances = 20;` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 350**: `uint16_t distances[maxDistances];` - ‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 351**: `int distanceCount[maxDistances];` - ‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå‡πÄ‡∏Å‡πá‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡πà‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 352**: `int foundDistances = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 353**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 354**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ PTFS Official Protocol
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 355**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 356**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 357**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Pattern 1
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 358**: `for (int i = 0; i <= length - 8; i++) {` - ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS Protocol
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 359**: `if (data[i] == 0xFB && data[i+1] == 0x03 && data[i+3] == 0x04) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 360**: `uint8_t dataValid = data[i+4];` - ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤ DataValidInd (1=valid, 0=invalid)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 361**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ DataValidInd
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 362**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 363**: `if (dataValid == 1) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 364**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 365**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Distance in Little Endian format
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 366**: `uint16_t dm_value = data[i+6] | (data[i+7] << 8);` - ‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á 2 bytes ‡πÄ‡∏õ‡πá‡∏ô 16-bit
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 367**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 368**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 369**: `if (dm_value >= 30 && dm_value <= 10000) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á 3m-1000m ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 370**: `addDistance(distances, distanceCount, &foundDistances, dm_value, maxDistances);` - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÉ‡∏ô‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 371**: `} else if (dm_value == 0) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô 0m ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 372**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á 0m
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 373**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏≠‡∏∑‡πà‡∏ô‡πÜ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 374**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 375**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 376**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 377**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 378**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 379**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 380**: `}` - ‡∏õ‡∏¥‡∏î for loop
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 381**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 382**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 383**: `int bestDm = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 384**: `int bestCount = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏Ñ‡πà‡∏≤‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 385**: `for (int i = 0; i < foundDistances; i++) {` - ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 386**: `if (distanceCount[i] > bestCount && distanceCount[i] >= 5) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 387**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 3 ‡πÄ‡∏õ‡πá‡∏ô 5
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 388**: `bestCount = distanceCount[i];` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 389**: `bestDm = distances[i];` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 390**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 391**: `}` - ‡∏õ‡∏¥‡∏î for loop
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 392**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 393**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 394**: `if (bestDm == 0 && foundDistances > 0) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡∏π‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 395**: `uint32_t sum = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏£‡∏ß‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 396**: `int count = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 397**: `uint16_t refValue = distances[0];` - ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 398**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 399**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 400**: `for (int i = 0; i < foundDistances; i++) {` - ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 401**: `if (abs((int)distances[i] - (int)refValue) <= 20) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 20dm (2m)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 402**: `sum += distances[i];` - ‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏ú‡∏•‡∏£‡∏ß‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 403**: `count++;` - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 404**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 405**: `}` - ‡∏õ‡∏¥‡∏î for loop
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 406**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 407**: `if (count >= 2) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏Ñ‡πà‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 408**: `bestDm = sum / count;` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 409**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 410**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 2 ‡∏Ñ‡πà‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 411**: `bestDm = distances[0];` - ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏Å
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 412**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏Å
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 413**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 414**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 415**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 416**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 417**: `if (bestDm > 0) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏û‡∏ö‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 418**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 419**: `if (bestDm < 30) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 3.0m ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 420**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á Filter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 421**: `clearDistanceFilter();` - ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 422**: `distance = 0.0;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô 0
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 423**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 3.0m
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 424**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Moving Average Filter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 425**: `float meters = bestDm / 10.0;` - ‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å dm ‡πÄ‡∏õ‡πá‡∏ô m
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 426**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 427**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏°‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏°‡∏ú‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 428**: `if (meters > 0 && meters < 1000) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á 0-1000m ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 429**: `addDistanceToFilter(meters);` - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 430**: `distance = getFilteredDistance();` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 431**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 432**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á Filter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 433**: `clearDistanceFilter();` - ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 434**: `distance = 0.0;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô 0
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 435**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 436**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 437**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 438**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 439**: `clearDistanceFilter();` - ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 440**: `distance = 0.0;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô 0
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 441**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 442**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô processPTFSData

### 13. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏™‡∏ï‡∏£‡∏µ‡∏° PTFS (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 569-604)
```cpp
void processPTFSStream() {
    // ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥
    static unsigned long lastBufferCleanup = 0;
    
    // ‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÄ‡∏ï‡πá‡∏°
    if (millis() - lastBufferCleanup >= 30000) { // ‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        ptfsBufferIndex = 0;
        lastBufferCleanup = millis();
    }
    
    while (Serial2.available()) {
        uint8_t newByte = Serial2.read();
        
        // ‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö loopback ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏°‡∏á‡∏ß‡∏î‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
        if (newByte == 0xFA && ptfsBufferIndex > 15) {
            // ‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏Å‡πÅ‡∏•‡πâ‡∏ß
            ptfsBufferIndex = 0;
            continue;
        }
        
        ptfsBuffer[ptfsBufferIndex++] = newByte;
        
        // ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå
        if (ptfsBufferIndex >= 200) {
            ptfsBufferIndex = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°
            Serial.println("‚ö†Ô∏è PTFS Buffer Overflow - Reset!");
        }
    }
    
    // ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡πâ‡∏≤‡∏•‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£
    if (ptfsBufferIndex >= 8) { // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 2 ‡πÄ‡∏õ‡πá‡∏ô 8
        processPTFSData(ptfsBuffer, ptfsBufferIndex);
        lastPTFSAnalysis = millis();
        ptfsBufferIndex = 0;
    }
}
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 569**: `void processPTFSStream() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏™‡∏ï‡∏£‡∏µ‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å PTFS sensor
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 570**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 571**: `static unsigned long lastBufferCleanup = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 572**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 573**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 574**: `if (millis() - lastBufferCleanup >= 30000) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 575**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 576**: `ptfsBufferIndex = 0;` - ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 577**: `lastBufferCleanup = millis();` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 578**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 579**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 580**: `while (Serial2.available()) {` - ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å UART2 ‡∏ï‡∏£‡∏≤‡∏ö‡πÉ‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 581**: `uint8_t newByte = Serial2.read();` - ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 1 byte ‡∏à‡∏≤‡∏Å UART2
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 582**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 583**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö loopback
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 584**: `if (newByte == 0xFA && ptfsBufferIndex > 15) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô 0xFA ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 585**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏Å‡πÅ‡∏•‡πâ‡∏ß
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 586**: `ptfsBufferIndex = 0;` - ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 587**: `continue;` - ‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 588**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 589**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 590**: `ptfsBuffer[ptfsBufferIndex++] = newByte;` - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 591**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 592**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 593**: `if (ptfsBufferIndex >= 200) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 594**: `ptfsBufferIndex = 0;` - ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 595**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 596**: `Serial.println("‚ö†Ô∏è PTFS Buffer Overflow - Reset!");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏•‡πâ‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 597**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 598**: `}` - ‡∏õ‡∏¥‡∏î while loop
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 599**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 600**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡πâ‡∏≤‡∏•‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 601**: `if (ptfsBufferIndex >= 8) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 8 bytes ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 602**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 2 ‡πÄ‡∏õ‡πá‡∏ô 8
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 603**: `processPTFSData(ptfsBuffer, ptfsBufferIndex);` - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 604**: `lastPTFSAnalysis = millis();` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 605**: `ptfsBufferIndex = 0;` - ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ö‡∏±‡∏ü‡πÄ‡∏ü‡∏≠‡∏£‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 606**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 607**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô processPTFSStream

### 14. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô MPU6050 (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 606-892)
```cpp
// ================ MPU6050 Functions ================
void initializeAdvancedPitch() {
    Serial.println("üîß Initializing Advanced Pitch Calculation...");
    Serial.println("   üìê Using Accelerometer + Gyroscope for accurate pitch");
    Serial.println("   üéØ Range: -90¬∞ to +90¬∞ (Pitch/Elevation)");
    Serial.println("   ‚úÖ Roll Independent - ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤");
}

void calibrateMPU6050() {
    Serial.println("üîß Starting PROFESSIONAL MPU6050 calibration for ¬±0.1¬∞ accuracy...");
    Serial.println("   üìê Keep sensor FLAT and STILL for 30 seconds...");
    Serial.println("   üéØ This will set Elevation = 0¬∞ when sensor is level (‡πÅ‡∏ô‡∏ß‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏≤‡∏¢‡∏ï‡∏≤)");
    Serial.println("   ‚ö†Ô∏è  Make sure sensor is perfectly horizontal (‡∏Ç‡∏ô‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡πÇ‡∏•‡∏Å)!");
    Serial.println("   üéØ Enhanced calibration: 3,000 samples for maximum precision");
    
    delay(3000);
    
    long ax_sum = 0, ay_sum = 0, az_sum = 0;
    long gx_sum = 0, gy_sum = 0, gz_sum = 0;
    const int samples = 3000; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô 3,000 samples ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
    
    Serial.println("   üîÑ Professional Calibrating... (30 seconds)");
    
    for (int i = 0; i < samples; i++) {
        mpu.getMotion6(&ax, &ay, &az, &gx, &gy, &gz);
        ax_sum += ax;
        ay_sum += ay;
        az_sum += az;
        gx_sum += gx;
        gy_sum += gy;
        gz_sum += gz;
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
        if (i % 300 == 0) {
            Serial.printf("   üìä Progress: %d/%d samples (%.1f%%)\n", i, samples, (float)i/samples*100);
        }
        delay(10);
    }
    
    // Professional calibration for both accelerometer and gyroscope
    ax_offset = ax_sum / samples;
    ay_offset = ay_sum / samples;
    az_offset = az_sum / samples - 16384; // Z-axis = 0 ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏á‡∏£‡∏≤‡∏ö
    
    // Gyroscope calibration (should be 0 when stationary)
    gx_offset = gx_sum / samples;
    gy_offset = gy_sum / samples;
    gz_offset = gz_sum / samples;
    
    calibrated = true;
    Serial.println("‚úÖ PROFESSIONAL MPU6050 Calibration Complete!");
}

void calculateElevationAngle() {
    // Professional Elevation Calculation with ¬±0.1¬∞ accuracy
    
    // ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° Sampling Rate ‡∏ó‡∏µ‡πà 100 Hz
    unsigned long current_time = millis();
    if (current_time - last_sample_time < SAMPLE_INTERVAL) {
        return; // Skip if not time for next sample
    }
    last_sample_time = current_time;
    
    // ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å MPU6050
    mpu.getMotion6(&ax, &ay, &az, &gx, &gy, &gz);
    
    // Apply professional calibration
    if (calibrated) {
        ax -= ax_offset;
        ay -= ay_offset;
        az -= az_offset;
        gx -= gx_offset;
        gy -= gy_offset;
        gz -= gz_offset;
    }
    
    // ‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤ accelerometer ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ g (gravity)
    float Ax = ax / 16384.0;  // MPU6050 ¬±2g range
    float Ay = ay / 16384.0;
    float Az = az / 16384.0;
    
    // ‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤ gyroscope ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ ¬∞/s
    float Gx = gx / GYRO_SENSITIVITY;  // MPU6050 ¬±250¬∞/s range
    float Gy = gy / GYRO_SENSITIVITY;
    float Gz = gz / GYRO_SENSITIVITY;
    
    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Data Quality Score
    data_quality_score = calculateDataQuality(Ax, Ay, Az, Gx, Gy, Gz);
    high_quality_data = (data_quality_score > 80.0); // 80% threshold
    
    // Professional Elevation Calculation with Complementary Filter
    
    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏à‡∏≤‡∏Å Accelerometer (‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß)
    float total_magnitude = sqrt(Ax*Ax + Ay*Ay + Az*Az);
    
    if (total_magnitude > 0.1 && high_quality_data) {
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏°‡∏∏‡∏° 90¬∞ ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        if (abs(Ax) > 0.95 && sqrt(Ay*Ay + Az*Az) < 0.2) {
            // ‡πÉ‡∏Å‡∏•‡πâ‡∏°‡∏∏‡∏° 90¬∞ ‡∏°‡∏≤‡∏Å - ‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
            if (Ax > 0) {
                elevation_raw = 90.0;  // ‡πÄ‡∏á‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô 90¬∞
            } else {
                elevation_raw = -90.0; // ‡∏Å‡πâ‡∏°‡∏•‡∏á 90¬∞
            }
        } else {
            // ‡πÉ‡∏ä‡πâ atan2 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∏‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Å‡∏ß‡πà‡∏≤ asin)
            float yz_magnitude = sqrt(Ay*Ay + Az*Az);
            if (yz_magnitude > 0.1) {
                elevation_raw = atan2(Ax, yz_magnitude) * 180.0 / PI;
            } else {
                elevation_raw = 0.0; // ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ
            }
        }
    } else {
        elevation_raw = 0.0; // ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ
    }
    
    // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡πà‡∏≤‡∏°‡∏∏‡∏°‡∏Å‡πâ‡∏°/‡πÄ‡∏á‡∏¢‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á -90¬∞ ‡∏ñ‡∏∂‡∏á +90¬∞
    if (elevation_raw > 90.0) elevation_raw = 90.0;
    if (elevation_raw < -90.0) elevation_raw = -90.0;
    
    // ‡πÉ‡∏ä‡πâ Complementary Filter ‡πÅ‡∏ó‡∏ô Low-pass + Moving Average
    // Gyroscope rate ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö pitch (elevation) ‡∏Ñ‡∏∑‡∏≠ Gy (Y-axis rotation)
    float gyro_rate = Gy; // ¬∞/s
    
    // ‡πÉ‡∏ä‡πâ Complementary Filter ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ ¬±0.1¬∞
    elevation_complementary = applyComplementaryFilter(elevation_raw, gyro_rate, DT);
    
    // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡πà‡∏≤‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
    if (elevation_complementary > 90.0) elevation_complementary = 90.0;
    if (elevation_complementary < -90.0) elevation_complementary = -90.0;
}
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 606**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö MPU6050 Functions
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 607**: `void initializeAdvancedPitch() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 608**: `Serial.println("üîß Initializing Advanced Pitch Calculation...");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 609**: `Serial.println("   üìê Using Accelerometer + Gyroscope for accurate pitch");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 610**: `Serial.println("   üéØ Range: -90¬∞ to +90¬∞ (Pitch/Elevation)");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ä‡πà‡∏ß‡∏á‡∏°‡∏∏‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 611**: `Serial.println("   ‚úÖ Roll Independent - ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 612**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô initializeAdvancedPitch
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 613**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 614**: `void calibrateMPU6050() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 615**: `Serial.println("üîß Starting PROFESSIONAL MPU6050 calibration for ¬±0.1¬∞ accuracy...");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 616**: `Serial.println("   üìê Keep sensor FLAT and STILL for 30 seconds...");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 617**: `Serial.println("   üéØ This will set Elevation = 0¬∞ when sensor is level (‡πÅ‡∏ô‡∏ß‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏≤‡∏¢‡∏ï‡∏≤)");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 618**: `Serial.println("   ‚ö†Ô∏è  Make sure sensor is perfectly horizontal (‡∏Ç‡∏ô‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡πÇ‡∏•‡∏Å)!");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 619**: `Serial.println("   üéØ Enhanced calibration: 3,000 samples for maximum precision");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 620**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 621**: `delay(3000);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 622**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 623**: `long ax_sum = 0, ay_sum = 0, az_sum = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• accelerometer
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 624**: `long gx_sum = 0, gy_sum = 0, gz_sum = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• gyroscope
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 625**: `const int samples = 3000;` - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 3,000 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 626**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô 3,000 samples
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 627**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 628**: `Serial.println("   üîÑ Professional Calibrating... (30 seconds)");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 629**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 630**: `for (int i = 0; i < samples; i++) {` - ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï 3,000 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 631**: `mpu.getMotion6(&ax, &ay, &az, &gx, &gy, &gz);` - ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 632**: `ax_sum += ax;` - ‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤ accelerometer X
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 633**: `ay_sum += ay;` - ‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤ accelerometer Y
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 634**: `az_sum += az;` - ‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤ accelerometer Z
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 635**: `gx_sum += gx;` - ‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤ gyroscope X
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 636**: `gy_sum += gy;` - ‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤ gyroscope Y
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 637**: `gz_sum += gz;` - ‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤ gyroscope Z
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 638**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 639**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 640**: `if (i % 300 == 0) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 641**: `Serial.printf("   üìä Progress: %d/%d samples (%.1f%%)\n", i, samples, (float)i/samples*100);` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 642**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 643**: `delay(10);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 10ms
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 644**: `}` - ‡∏õ‡∏¥‡∏î for loop
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 645**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 646**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 647**: `ax_offset = ax_sum / samples;` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á accelerometer X
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 648**: `ay_offset = ay_sum / samples;` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á accelerometer Y
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 649**: `az_offset = az_sum / samples - 16384;` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á accelerometer Z
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 650**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Z-axis = 0 ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏á‡∏£‡∏≤‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 651**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 652**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï gyroscope
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 653**: `gx_offset = gx_sum / samples;` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á gyroscope X
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 654**: `gy_offset = gy_sum / samples;` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á gyroscope Y
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 655**: `gz_offset = gz_sum / samples;` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á gyroscope Z
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 656**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 657**: `calibrated = true;` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 658**: `Serial.println("‚úÖ PROFESSIONAL MPU6050 Calibration Complete!");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 659**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô calibrateMPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 660**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 661**: `void calculateElevationAngle() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 662**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 663**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 664**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° Sampling Rate
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 665**: `unsigned long current_time = millis();` - ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 666**: `if (current_time - last_sample_time < SAMPLE_INTERVAL) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 667**: `return;` - ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 668**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 669**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 670**: `last_sample_time = current_time;` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 671**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 672**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 673**: `mpu.getMotion6(&ax, &ay, &az, &gx, &gy, &gz);` - ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 674**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 675**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 676**: `if (calibrated) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 677**: `ax -= ax_offset;` - ‡∏•‡∏ö‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á accelerometer X
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 678**: `ay -= ay_offset;` - ‡∏•‡∏ö‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á accelerometer Y
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 679**: `az -= az_offset;` - ‡∏•‡∏ö‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á accelerometer Z
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 680**: `gx -= gx_offset;` - ‡∏•‡∏ö‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á gyroscope X
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 681**: `gy -= gy_offset;` - ‡∏•‡∏ö‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á gyroscope Y
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 682**: `gz -= gz_offset;` - ‡∏•‡∏ö‡∏Ñ‡πà‡∏≤ offset ‡∏Ç‡∏≠‡∏á gyroscope Z
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 683**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 684**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 685**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤ accelerometer
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 686**: `float Ax = ax / 16384.0;` - ‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤ accelerometer X ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ g
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 687**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ MPU6050 ¬±2g range
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 688**: `float Ay = ay / 16384.0;` - ‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤ accelerometer Y ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ g
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 689**: `float Az = az / 16384.0;` - ‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤ accelerometer Z ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ g
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 690**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 691**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤ gyroscope
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 692**: `float Gx = gx / GYRO_SENSITIVITY;` - ‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤ gyroscope X ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ ¬∞/s
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 693**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ MPU6050 ¬±250¬∞/s range
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 694**: `float Gy = gy / GYRO_SENSITIVITY;` - ‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤ gyroscope Y ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ ¬∞/s
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 695**: `float Gz = gz / GYRO_SENSITIVITY;` - ‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡πà‡∏≤ gyroscope Z ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ ¬∞/s
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 696**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 697**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Data Quality Score
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 698**: `data_quality_score = calculateDataQuality(Ax, Ay, Az, Gx, Gy, Gz);` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 699**: `high_quality_data = (data_quality_score > 80.0);` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 700**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ 80% threshold
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 701**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 702**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 703**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 704**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏à‡∏≤‡∏Å Accelerometer
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 705**: `float total_magnitude = sqrt(Ax*Ax + Ay*Ay + Az*Az);` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏£‡∏ß‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 706**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 707**: `if (total_magnitude > 0.1 && high_quality_data) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 708**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏°‡∏∏‡∏° 90¬∞
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 709**: `if (abs(Ax) > 0.95 && sqrt(Ay*Ay + Az*Az) < 0.2) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏°‡∏∏‡∏° 90¬∞ ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 710**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 711**: `if (Ax > 0) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏á‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 712**: `elevation_raw = 90.0;` - ‡∏ï‡∏±‡πâ‡∏á‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÄ‡∏õ‡πá‡∏ô 90¬∞
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 713**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏á‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô 90¬∞
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 714**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏Å‡πâ‡∏°‡∏•‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 715**: `elevation_raw = -90.0;` - ‡∏ï‡∏±‡πâ‡∏á‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÄ‡∏õ‡πá‡∏ô -90¬∞
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 716**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡πâ‡∏°‡∏•‡∏á 90¬∞
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 717**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 718**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏∏‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÜ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 719**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ atan2
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 720**: `float yz_magnitude = sqrt(Ay*Ay + Az*Az);` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÉ‡∏ô‡∏£‡∏∞‡∏ô‡∏≤‡∏ö YZ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 721**: `if (yz_magnitude > 0.1) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡∏ô‡∏≤‡∏î YZ ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 722**: `elevation_raw = atan2(Ax, yz_magnitude) * 180.0 / PI;` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏î‡πâ‡∏ß‡∏¢ atan2
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 723**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏Ç‡∏ô‡∏≤‡∏î YZ ‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 724**: `elevation_raw = 0.0;` - ‡∏ï‡∏±‡πâ‡∏á‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÄ‡∏õ‡πá‡∏ô 0
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 725**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 726**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 727**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 728**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 729**: `elevation_raw = 0.0;` - ‡∏ï‡∏±‡πâ‡∏á‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÄ‡∏õ‡πá‡∏ô 0
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 730**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 731**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 732**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 733**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡πà‡∏≤‡∏°‡∏∏‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 734**: `if (elevation_raw > 90.0) elevation_raw = 90.0;` - ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 90¬∞
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 735**: `if (elevation_raw < -90.0) elevation_raw = -90.0;` - ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ -90¬∞
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 736**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 737**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Complementary Filter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 738**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Gyroscope rate ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö pitch
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 739**: `float gyro_rate = Gy;` - ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ gyroscope Y ‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 740**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ ¬∞/s
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 741**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 742**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Complementary Filter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 743**: `elevation_complementary = applyComplementaryFilter(elevation_raw, gyro_rate, DT);` - ‡πÉ‡∏ä‡πâ Complementary Filter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 744**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ ¬±0.1¬∞
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 745**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 746**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡πà‡∏≤‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 747**: `if (elevation_complementary > 90.0) elevation_complementary = 90.0;` - ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 90¬∞
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 748**: `if (elevation_complementary < -90.0) elevation_complementary = -90.0;` - ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ -90¬∞
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 749**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô calculateElevationAngle

### 15. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô BLE (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 894-981)
```cpp
// ================ BLE Functions ================
void setupBLE() {
    Serial.println("üîµ Starting BLE system...");
    
    BLEDevice::init(DEVICE_NAME);
    BLEDevice::setMTU(247);
    esp_bt_controller_mem_release(ESP_BT_MODE_CLASSIC_BT);
    
    pServer = BLEDevice::createServer();
    pServer->setCallbacks(new MyServerCallbacks());
    
    BLEService *pService = pServer->createService(SERVICE_UUID);
    
    pCharacteristic = pService->createCharacteristic(
                        CHARACTERISTIC_UUID,
                        BLECharacteristic::PROPERTY_READ   |
                        BLECharacteristic::PROPERTY_WRITE  |
                        BLECharacteristic::PROPERTY_NOTIFY |
                        BLECharacteristic::PROPERTY_INDICATE
                      );
    
    pCharacteristic->addDescriptor(new BLE2902());
    pCharacteristic->setCallbacks(new MyCharacteristicCallbacks());
    
    pService->start();
    
    BLEAdvertising *pAdvertising = BLEDevice::getAdvertising();
    pAdvertising->addServiceUUID(SERVICE_UUID);
    pAdvertising->setScanResponse(true);
    pAdvertising->setMinPreferred(0x06);
    pAdvertising->setMinPreferred(0x12);
    BLEDevice::startAdvertising();
    
    Serial.println("‚úÖ BLE ready, waiting for connection...");
}

void sendBLEData() {
    if (!deviceConnected || !pCharacteristic) return;

    // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û (Elevation Angle) ‡πÑ‡∏õ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
    String msg = "elevation:" + String((int)elevation_complementary); // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏° (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°)
    pCharacteristic->setValue(msg.c_str());
    pCharacteristic->notify();
    delay(50);

    // ‡∏™‡πà‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å PTFS sensor
    msg = "distance:" + String(distance, 1);
    pCharacteristic->setValue(msg.c_str());
    pCharacteristic->notify();
    delay(50);

    // ‡∏™‡πà‡∏á Data Quality Score
    msg = "quality:" + String(data_quality_score, 1);
    pCharacteristic->setValue(msg.c_str());
    pCharacteristic->notify();
    delay(50);

    // ‡∏™‡πà‡∏á mode
    msg = "mode:" + String(currentMode);
    pCharacteristic->setValue(msg.c_str());
    pCharacteristic->notify();
    delay(50);

    // ‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏à‡∏ö
    pCharacteristic->setValue("END");
    pCharacteristic->notify();
}

void handleBLEReconnection() {
    // ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ BLE
    static unsigned long lastReconnectAttempt = 0;
    const unsigned long reconnectInterval = 2000; // 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    
    if (!deviceConnected && oldDeviceConnected) {
        // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà
        if (millis() - lastReconnectAttempt >= reconnectInterval) {
            delay(500);
            pServer->startAdvertising();
            Serial.println("üîÑ Start advertising again...");
            lastReconnectAttempt = millis();
        }
        oldDeviceConnected = deviceConnected;
    }
    if (deviceConnected && !oldDeviceConnected) {
        oldDeviceConnected = deviceConnected;
        Serial.println("üîµ BLE Reconnected Successfully!");
    }
}
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 894**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö BLE Functions
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 895**: `void setupBLE() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 896**: `Serial.println("üîµ Starting BLE system...");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 897**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 898**: `BLEDevice::init(DEVICE_NAME);` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô BLE device ‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 899**: `BLEDevice::setMTU(247);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ MTU (Maximum Transmission Unit) ‡πÄ‡∏õ‡πá‡∏ô 247 bytes
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 900**: `esp_bt_controller_mem_release(ESP_BT_MODE_CLASSIC_BT);` - ‡∏õ‡∏•‡∏î‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡∏Ç‡∏≠‡∏á Classic Bluetooth
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 901**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 902**: `pServer = BLEDevice::createServer();` - ‡∏™‡∏£‡πâ‡∏≤‡∏á BLE Server
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 903**: `pServer->setCallbacks(new MyServerCallbacks());` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ callbacks ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö BLE Server
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 904**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 905**: `BLEService *pService = pServer->createService(SERVICE_UUID);` - ‡∏™‡∏£‡πâ‡∏≤‡∏á BLE Service ‡∏î‡πâ‡∏ß‡∏¢ UUID ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 906**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 907**: `pCharacteristic = pService->createCharacteristic(` - ‡∏™‡∏£‡πâ‡∏≤‡∏á BLE Characteristic
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 908**: `CHARACTERISTIC_UUID,` - ‡πÉ‡∏ä‡πâ UUID ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 909**: `BLECharacteristic::PROPERTY_READ   |` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 910**: `BLECharacteristic::PROPERTY_WRITE  |` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 911**: `BLECharacteristic::PROPERTY_NOTIFY |` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏î‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 912**: `BLECharacteristic::PROPERTY_INDICATE` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÑ‡∏î‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 913**: `);` - ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Characteristic
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 914**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 915**: `pCharacteristic->addDescriptor(new BLE2902());` - ‡πÄ‡∏û‡∏¥‡πà‡∏° descriptor ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Notify/Indicate
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 916**: `pCharacteristic->setCallbacks(new MyCharacteristicCallbacks());` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ callbacks ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Characteristic
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 917**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 918**: `pService->start();` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô BLE Service
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 919**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 920**: `BLEAdvertising *pAdvertising = BLEDevice::getAdvertising();` - ‡∏™‡∏£‡πâ‡∏≤‡∏á BLE Advertising
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 921**: `pAdvertising->addServiceUUID(SERVICE_UUID);` - ‡πÄ‡∏û‡∏¥‡πà‡∏° Service UUID ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 922**: `pAdvertising->setScanResponse(true);` - ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô scan response
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 923**: `pAdvertising->setMinPreferred(0x06);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 924**: `pAdvertising->setMinPreferred(0x12);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 925**: `BLEDevice::startAdvertising();` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 926**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 927**: `Serial.println("‚úÖ BLE ready, waiting for connection...");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° BLE ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 928**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô setupBLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 929**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 930**: `void sendBLEData() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πà‡∏≤‡∏ô BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 931**: `if (!deviceConnected || !pCharacteristic) return;` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡∏∞ Characteristic ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 932**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 933**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 934**: `String msg = "elevation:" + String((int)elevation_complementary);` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 935**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 936**: `pCharacteristic->setValue(msg.c_str());` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô Characteristic
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 937**: `pCharacteristic->notify();` - ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 938**: `delay(50);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 50ms
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 939**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 940**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 941**: `msg = "distance:" + String(distance, 1);` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 942**: `pCharacteristic->setValue(msg.c_str());` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô Characteristic
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 943**: `pCharacteristic->notify();` - ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 944**: `delay(50);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 50ms
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 945**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 946**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á Data Quality Score
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 947**: `msg = "quality:" + String(data_quality_score, 1);` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 948**: `pCharacteristic->setValue(msg.c_str());` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô Characteristic
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 949**: `pCharacteristic->notify();` - ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 950**: `delay(50);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 50ms
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 951**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 952**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á mode
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 953**: `msg = "mode:" + String(currentMode);` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏´‡∏°‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 954**: `pCharacteristic->setValue(msg.c_str());` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô Characteristic
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 955**: `pCharacteristic->notify();` - ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 956**: `delay(50);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 50ms
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 957**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 958**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏à‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 959**: `pCharacteristic->setValue("END");` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 960**: `pCharacteristic->notify();` - ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 961**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô sendBLEData
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 962**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 963**: `void handleBLEReconnection() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ BLE ‡πÉ‡∏´‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 964**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 965**: `static unsigned long lastReconnectAttempt = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 966**: `const unsigned long reconnectInterval = 2000;` - ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 967**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 968**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 969**: `if (!deviceConnected && oldDeviceConnected) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ï‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 970**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 971**: `if (millis() - lastReconnectAttempt >= reconnectInterval) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 972**: `delay(500);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 500ms
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 973**: `pServer->startAdvertising();` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ BLE ‡πÉ‡∏´‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 974**: `Serial.println("üîÑ Start advertising again...");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤‡πÉ‡∏´‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 975**: `lastReconnectAttempt = millis();` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 976**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 977**: `oldDeviceConnected = deviceConnected;` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 978**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 979**: `if (deviceConnected && !oldDeviceConnected) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 980**: `oldDeviceConnected = deviceConnected;` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 981**: `Serial.println("üîµ BLE Reconnected Successfully!");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 982**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 983**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô handleBLEReconnection

### 16. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Setup (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 983-1094)
```cpp
// ================ Setup ================
void setup() {
    Serial.begin(115200);
    Serial.println("üéØ ESP32 + MPU6050 + PTFS Distance Sensor + BLE - PROFESSIONAL EDITION");
    Serial.println("=======================================================================");
    Serial.println("üìê PROFESSIONAL ELEVATION/DEPRESSION ANGLE measurement with ¬±0.1¬∞ precision");
    
    // Initialize I2C
    Wire.begin(SDA_PIN, SCL_PIN);
    Wire.setClock(400000);
    
    // Setup PTFS Distance Sensor (3.3V system)
    Serial.println("üîß Initialize PTFS Distance Sensor (3.3V system)...");
    Serial.println("   ‚ö° PTFS VIN ‚Üí 3.3V, PWR_EN ‚Üí GPIO2 (HIGH)");
    Serial.println("   üîå TX ‚Üí GPIO16 (RX2), RX ‚Üí GPIO17 (TX2)");
    Serial.println("   üì° UART: 115200 bps, TTL 3.3V");
    
    pinMode(PTFS_PWR_PIN, OUTPUT);
    pinMode(PTFS_RST_PIN, OUTPUT);
    
    digitalWrite(PTFS_PWR_PIN, HIGH);  // ‡πÄ‡∏õ‡∏¥‡∏î PTFS ‡∏î‡πâ‡∏ß‡∏¢ 3.3V
    digitalWrite(PTFS_RST_PIN, LOW);
    delay(100);
    digitalWrite(PTFS_RST_PIN, HIGH);
    delay(500);
    
    // Initialize UART for PTFS (115200 bps)
    Serial2.begin(115200, SERIAL_8N1, PTFS_RX_PIN, PTFS_TX_PIN);
    
    // GPIO signal strength for 3.3V system
    gpio_set_drive_capability(GPIO_NUM_17, GPIO_DRIVE_CAP_2); // 3.3V TTL
    gpio_set_pull_mode(GPIO_NUM_17, GPIO_PULLUP_ONLY);
    gpio_set_drive_capability(GPIO_NUM_16, GPIO_DRIVE_CAP_2);
    gpio_set_pull_mode(GPIO_NUM_16, GPIO_PULLUP_ONLY);
    
    Serial.println("‚úÖ PTFS Distance Sensor ready (3.3V system)");
    
    delay(1000);
    
    // Initialize MPU6050
    Serial.println("üîß Initialize MPU6050...");
    mpu.initialize();
    mpu.setFullScaleAccelRange(MPU6050_ACCEL_FS_2);
    mpu.setFullScaleGyroRange(MPU6050_GYRO_FS_250);
    mpu.setDLPFMode(MPU6050_DLPF_BW_5);
    
    if (mpu.testConnection()) {
        Serial.println("‚úÖ MPU6050 Connected Successfully!");
        
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á
        initializeAdvancedPitch();
        
        // ‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï MPU6050
        calibrateMPU6050();
        
        // Setup BLE
        setupBLE();
        
        // Start PTFS measurement
        Serial.println("üìè Starting PTFS distance measurement...");
        Serial.println("   üéØ Using official PTFS protocol (0xFA/0xFB)");
        Serial.println("   üì° Baud rate: 115200 bps");
        
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á PTFS Protocol
        ptfsMeasurementActive = true;
        startPTFSMeasurement();
        lastPTFSCommand = millis();
        lastPTFSAnalysis = millis();
        lastPTFSDisplayTime = millis();
        
        Serial.println("=======================================================================");
        Serial.println("üéØ PROFESSIONAL SYSTEM READY! Measuring with ¬±0.1¬∞ precision...");
        Serial.println("üìê ELEVATION: ‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢/‡∏°‡∏∏‡∏°‡∏Å‡πâ‡∏° (Elevation/Depression) in degrees via BLE");
        Serial.println("üìè PTFS: 3.3V power, UART 115200 bps, Official protocol");
        Serial.println("üìä QUALITY: Real-time data quality assessment (0-100%)");
        Serial.println("üéØ FOCUS: Professional-grade Elevation/Depression Angle measurement");
        Serial.println("üîí STABLE: Roll Independent - ‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤");
        Serial.println("‚ö° SAMPLING: 100 Hz controlled rate for maximum accuracy");
        
    } else {
        Serial.println("‚ùå MPU6050 Connection Failed!");
        Serial.println("Check wiring:");
        Serial.println("  ESP32 3.3V ‚Üí MPU6050 VCC");
        Serial.println("  ESP32 GND  ‚Üí MPU6050 GND");
        Serial.println("  ESP32 G21  ‚Üí MPU6050 SDA");
        Serial.println("  ESP32 G22  ‚Üí MPU6050 SCL");
        Serial.println("  PTFS VIN   ‚Üí 3.3V");
        Serial.println("  PTFS GND   ‚Üí GND");
        Serial.println("  PTFS TX    ‚Üí GPIO16 (RX2)");
        Serial.println("  PTFS RX    ‚Üí GPIO17 (TX2) - No R-divider needed");
        while(1);
    }
}
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 983**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Setup
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 984**: `void setup() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô setup ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 985**: `Serial.begin(115200);` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Serial communication ‡∏ó‡∏µ‡πà 115200 bps
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 986**: `Serial.println("üéØ ESP32 + MPU6050 + PTFS Distance Sensor + BLE - PROFESSIONAL EDITION");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 987**: `Serial.println("=======================================================================");` - ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏ö‡πà‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 988**: `Serial.println("üìê PROFESSIONAL ELEVATION/DEPRESSION ANGLE measurement with ¬±0.1¬∞ precision");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 989**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 990**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô I2C
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 991**: `Wire.begin(SDA_PIN, SCL_PIN);` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô I2C communication
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 992**: `Wire.setClock(400000);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà I2C ‡πÄ‡∏õ‡πá‡∏ô 400kHz
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 993**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 994**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PTFS Distance Sensor
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 995**: `Serial.println("üîß Initialize PTFS Distance Sensor (3.3V system)...");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 996**: `Serial.println("   ‚ö° PTFS VIN ‚Üí 3.3V, PWR_EN ‚Üí GPIO2 (HIGH)");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏ü
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 997**: `Serial.println("   üîå TX ‚Üí GPIO16 (RX2), RX ‚Üí GPIO17 (TX2)");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ UART
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 998**: `Serial.println("   üì° UART: 115200 bps, TTL 3.3V");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ UART
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 999**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1000**: `pinMode(PTFS_PWR_PIN, OUTPUT);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ GPIO2 ‡πÄ‡∏õ‡πá‡∏ô output
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1001**: `pinMode(PTFS_RST_PIN, OUTPUT);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ GPIO4 ‡πÄ‡∏õ‡πá‡∏ô output
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1002**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1003**: `digitalWrite(PTFS_PWR_PIN, HIGH);` - ‡πÄ‡∏õ‡∏¥‡∏î PTFS ‡∏î‡πâ‡∏ß‡∏¢ 3.3V
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1004**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1005**: `digitalWrite(PTFS_RST_PIN, LOW);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ reset ‡πÄ‡∏õ‡πá‡∏ô LOW
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1006**: `delay(100);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 100ms
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1007**: `digitalWrite(PTFS_RST_PIN, HIGH);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ reset ‡πÄ‡∏õ‡πá‡∏ô HIGH
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1008**: `delay(500);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 500ms
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1009**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1010**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô UART
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1011**: `Serial2.begin(115200, SERIAL_8N1, PTFS_RX_PIN, PTFS_TX_PIN);` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô UART2 ‡∏ó‡∏µ‡πà 115200 bps
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1012**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1013**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ GPIO signal strength
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1014**: `gpio_set_drive_capability(GPIO_NUM_17, GPIO_DRIVE_CAP_2);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ drive capability ‡∏Ç‡∏≠‡∏á GPIO17
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1015**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ 3.3V TTL
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1016**: `gpio_set_pull_mode(GPIO_NUM_17, GPIO_PULLUP_ONLY);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ pull-up ‡∏Ç‡∏≠‡∏á GPIO17
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1017**: `gpio_set_drive_capability(GPIO_NUM_16, GPIO_DRIVE_CAP_2);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ drive capability ‡∏Ç‡∏≠‡∏á GPIO16
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1018**: `gpio_set_pull_mode(GPIO_NUM_16, GPIO_PULLUP_ONLY);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ pull-up ‡∏Ç‡∏≠‡∏á GPIO16
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1019**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1020**: `Serial.println("‚úÖ PTFS Distance Sensor ready (3.3V system)");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° PTFS ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1021**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1022**: `delay(1000);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1023**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1024**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1025**: `Serial.println("üîß Initialize MPU6050...");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1026**: `mpu.initialize();` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1027**: `mpu.setFullScaleAccelRange(MPU6050_ACCEL_FS_2);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ accelerometer range ‡πÄ‡∏õ‡πá‡∏ô ¬±2g
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1028**: `mpu.setFullScaleGyroRange(MPU6050_GYRO_FS_250);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ gyroscope range ‡πÄ‡∏õ‡πá‡∏ô ¬±250¬∞/s
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1029**: `mpu.setDLPFMode(MPU6050_DLPF_BW_5);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Digital Low Pass Filter
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1030**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1031**: `if (mpu.testConnection()) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1032**: `Serial.println("‚úÖ MPU6050 Connected Successfully!");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1033**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1034**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1035**: `initializeAdvancedPitch();` - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1036**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1037**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1038**: `calibrateMPU6050();` - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1039**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1040**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1041**: `setupBLE();` - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1042**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1043**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1044**: `Serial.println("üìè Starting PTFS distance measurement...");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1045**: `Serial.println("   üéØ Using official PTFS protocol (0xFA/0xFB)");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÇ‡∏õ‡∏£‡πÇ‡∏ï‡∏Ñ‡∏≠‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1046**: `Serial.println("   üì° Baud rate: 115200 bps");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1047**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1048**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á PTFS Protocol
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1049**: `ptfsMeasurementActive = true;` - ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1050**: `startPTFSMeasurement();` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1051**: `lastPTFSCommand = millis();` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á PTFS ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1052**: `lastPTFSAnalysis = millis();` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1053**: `lastPTFSDisplayTime = millis();` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1054**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1055**: `Serial.println("=======================================================================");` - ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏ö‡πà‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1056**: `Serial.println("üéØ PROFESSIONAL SYSTEM READY! Measuring with ¬±0.1¬∞ precision...");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1057**: `Serial.println("üìê ELEVATION: ‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢/‡∏°‡∏∏‡∏°‡∏Å‡πâ‡∏° (Elevation/Depression) in degrees via BLE");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1058**: `Serial.println("üìè PTFS: 3.3V power, UART 115200 bps, Official protocol");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1059**: `Serial.println("üìä QUALITY: Real-time data quality assessment (0-100%)");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1060**: `Serial.println("üéØ FOCUS: Professional-grade Elevation/Depression Angle measurement");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏à‡∏∏‡∏î‡πÄ‡∏ô‡πâ‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1061**: `Serial.println("üîí STABLE: Roll Independent - ‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1062**: `Serial.println("‚ö° SAMPLING: 100 Hz controlled rate for maximum accuracy");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1063**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1064**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ MPU6050 ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1065**: `Serial.println("‚ùå MPU6050 Connection Failed!");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1066**: `Serial.println("Check wiring:");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1067**: `Serial.println("  ESP32 3.3V ‚Üí MPU6050 VCC");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏ü
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1068**: `Serial.println("  ESP32 GND  ‚Üí MPU6050 GND");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏£‡∏≤‡∏ß‡∏î‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1069**: `Serial.println("  ESP32 G21  ‚Üí MPU6050 SDA");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ SDA
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1070**: `Serial.println("  ESP32 G22  ‚Üí MPU6050 SCL");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ SCL
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1071**: `Serial.println("  PTFS VIN   ‚Üí 3.3V");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏ü PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1072**: `Serial.println("  PTFS GND   ‚Üí GND");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏£‡∏≤‡∏ß‡∏î‡πå PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1073**: `Serial.println("  PTFS TX    ‚Üí GPIO16 (RX2)");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ TX PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1074**: `Serial.println("  PTFS RX    ‚Üí GPIO17 (TX2) - No R-divider needed");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ RX PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1075**: `while(1);` - ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡πÑ‡∏°‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1076**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1077**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô setup

### 17. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Main Loop (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1096-1229)
```cpp
// ================ Main Loop ================
void loop() {
    // ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Watchdog Timer
    static unsigned long lastWatchdogFeed = 0;
    
    // ‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ watchdog ‡∏ö‡πà‡∏≠‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô
    if (millis() - lastWatchdogFeed >= 1000) { // ‡∏ó‡∏∏‡∏Å 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        yield();
        lastWatchdogFeed = millis();
    }
    
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö
    performHealthCheck();
    
    // Process PTFS distance sensor data
    processPTFSStream();
    
    // ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á PTFS ‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á
    if (millis() - lastPTFSCommand >= ptfsCommandInterval) {
        if (ptfsMeasurementActive) {
            startPTFSMeasurement();
        }
        lastPTFSCommand = millis();
    }
    
    // Hardware reset ‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏∏‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ (‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà)
    static unsigned long lastHardwareReset = 0;
    if (millis() - lastHardwareReset >= 300000) { // 5 ‡∏ô‡∏≤‡∏ó‡∏µ
        digitalWrite(PTFS_RST_PIN, LOW);
        delay(100);
        digitalWrite(PTFS_RST_PIN, HIGH);
        delay(500);
        ptfsMeasurementActive = true; // ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
        lastHardwareReset = millis();
    }
    
    // ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• MPU6050 (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö health check)
    if (mpu6050Healthy) {
        mpu.getMotion6(&ax, &ay, &az, &gx, &gy, &gz);
    } else {
        Serial.println("‚ö†Ô∏è Using cached MPU6050 data");
    }
    
    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢
    calculateElevationAngle();
    
    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏≠‡∏á‡∏®‡∏≤ - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°)
    Serial.printf("üìê ELEVATION: %+8d¬∞  |  DIST: %6.1fm  |  QUALITY: %5.1f%%", 
                  (int)elevation_complementary, distance, data_quality_score);
    
    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö (‡∏ó‡∏∏‡∏Å 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
    static unsigned long lastRawDisplay = 0;
    if (millis() - lastRawDisplay >= 3000) {
        Serial.printf("   üìä Raw: Ax=%+6.3f, Ay=%+6.3f, Az=%+6.3f (g)", 
                      ax/16384.0, ay/16384.0, az/16384.0);
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
        if (elevation_complementary > 1.0) {
            Serial.printf(" ‚Üí ‡πÄ‡∏á‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô");
        } else if (elevation_complementary < -1.0) {
            Serial.printf(" ‚Üí ‡∏Å‡πâ‡∏°‡∏•‡∏á");
        } else {
            Serial.printf(" ‚Üí ‡∏£‡∏≤‡∏ö");
        }
        
        lastRawDisplay = millis();
    }
    
    // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
    if (deviceConnected) {
        Serial.print("  [üîµ BLE Connected]");
    } else {
        Serial.print("  [‚ö™ BLE Disconnected]");
    }
    
    // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå
    if (mpu6050Healthy && ptfsHealthy) {
        Serial.print("  [‚úÖ Sensors OK]");
    } else {
        Serial.print("  [‚ö†Ô∏è Sensor Issues]");
    }
    
    Serial.println();
    
    // Send BLE data
    unsigned long currentMillis = millis();
    if (currentMillis - lastSendTime >= sendInterval) {
        lastSendTime = currentMillis;
        if (deviceConnected) {
            sendBLEData();
        }
    }
    
    // Handle BLE reconnection
    handleBLEReconnection();
    
    // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô watchdog timer (‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£)
    yield();
    delay(10);
}
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:**
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1096**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Main Loop
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1097**: `void loop() {` - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô loop ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ã‡πâ‡∏≥‡πÜ ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1098**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Watchdog Timer
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1099**: `static unsigned long lastWatchdogFeed = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ watchdog ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1100**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1101**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ watchdog ‡∏ö‡πà‡∏≠‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1102**: `if (millis() - lastWatchdogFeed >= 1000) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ watchdog ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1103**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ó‡∏∏‡∏Å 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1104**: `yield();` - ‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ watchdog
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1105**: `lastWatchdogFeed = millis();` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ watchdog ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1106**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1107**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1108**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1109**: `performHealthCheck();` - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1110**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1111**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1112**: `processPTFSStream();` - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1113**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1114**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á PTFS ‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1115**: `if (millis() - lastPTFSCommand >= ptfsCommandInterval) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á PTFS ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1116**: `if (ptfsMeasurementActive) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ PTFS ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1117**: `startPTFSMeasurement();` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1118**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1119**: `lastPTFSCommand = millis();` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á PTFS ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1120**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1121**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1122**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏∏‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1123**: `static unsigned long lastHardwareReset = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1124**: `if (millis() - lastHardwareReset >= 300000) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1125**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ 5 ‡∏ô‡∏≤‡∏ó‡∏µ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1126**: `digitalWrite(PTFS_RST_PIN, LOW);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ reset ‡πÄ‡∏õ‡πá‡∏ô LOW
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1127**: `delay(100);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 100ms
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1128**: `digitalWrite(PTFS_RST_PIN, HIGH);` - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ reset ‡πÄ‡∏õ‡πá‡∏ô HIGH
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1129**: `delay(500);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 500ms
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1130**: `ptfsMeasurementActive = true;` - ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á PTFS
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1131**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1132**: `lastHardwareReset = millis();` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1133**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1134**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1135**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1136**: `if (mpu6050Healthy) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ MPU6050 ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1137**: `mpu.getMotion6(&ax, &ay, &az, &gx, &gy, &gz);` - ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å MPU6050
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1138**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà MPU6050 ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1139**: `Serial.println("‚ö†Ô∏è Using cached MPU6050 data");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1140**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1141**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1142**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1143**: `calculateElevationAngle();` - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1144**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1145**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1146**: `Serial.printf("üìê ELEVATION: %+8d¬∞  |  DIST: %6.1fm  |  QUALITY: %5.1f%%",` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢ ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1147**: `(int)elevation_complementary, distance, data_quality_score);` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢ ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1148**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1149**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1150**: `static unsigned long lastRawDisplay = 0;` - ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1151**: `if (millis() - lastRawDisplay >= 3000) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1152**: `Serial.printf("   üìä Raw: Ax=%+6.3f, Ay=%+6.3f, Az=%+6.3f (g)",` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö accelerometer
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1153**: `ax/16384.0, ay/16384.0, az/16384.0);` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö accelerometer
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1154**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1155**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1156**: `if (elevation_complementary > 1.0) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1¬∞ ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1157**: `Serial.printf(" ‚Üí ‡πÄ‡∏á‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏á‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1158**: `} else if (elevation_complementary < -1.0) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ -1¬∞ ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1159**: `Serial.printf(" ‚Üí ‡∏Å‡πâ‡∏°‡∏•‡∏á");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏°‡∏•‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1160**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏≠‡∏∑‡πà‡∏ô‡πÜ
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1161**: `Serial.printf(" ‚Üí ‡∏£‡∏≤‡∏ö");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏≤‡∏ö
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1162**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1163**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1164**: `lastRawDisplay = millis();` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1165**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1166**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1167**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1168**: `if (deviceConnected) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ BLE ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1169**: `Serial.print("  [üîµ BLE Connected]");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1170**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1171**: `Serial.print("  [‚ö™ BLE Disconnected]");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1172**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1173**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1174**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1175**: `if (mpu6050Healthy && ptfsHealthy) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1176**: `Serial.print("  [‚úÖ Sensors OK]");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏õ‡∏Å‡∏ï‡∏¥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1177**: `} else {` - ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏õ‡∏Å‡∏ï‡∏¥
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1178**: `Serial.print("  [‚ö†Ô∏è Sensor Issues]");` - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1179**: `}` - ‡∏õ‡∏¥‡∏î else
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1180**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1181**: `Serial.println();` - ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1182**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1183**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1184**: `unsigned long currentMillis = millis();` - ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1185**: `if (currentMillis - lastSendTime >= sendInterval) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• BLE ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1186**: `lastSendTime = currentMillis;` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• BLE ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1187**: `if (deviceConnected) {` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ BLE ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1188**: `sendBLEData();` - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• BLE
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1189**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1190**: `}` - ‡∏õ‡∏¥‡∏î if
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1191**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1192**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ BLE ‡πÉ‡∏´‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1193**: `handleBLEReconnection();` - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ BLE ‡πÉ‡∏´‡∏°‡πà
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1194**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1195**: ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô watchdog timer
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1196**: `yield();` - ‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£ watchdog
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1197**: `delay(10);` - ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 10ms
- **‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1198**: `}` - ‡∏õ‡∏¥‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô loop

## ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å

### 1. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏±‡∏î‡∏°‡∏∏‡∏°‡πÄ‡∏á‡∏¢‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
- **‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥**: ¬±0.1¬∞ ‡∏î‡πâ‡∏ß‡∏¢ Complementary Filter
- **‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï**: 3,000 samples ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
- **‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**: 100 Hz (10ms interval)
- **‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û**: 0-100% real-time

### 2. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á PTFS
- **‡πÇ‡∏õ‡∏£‡πÇ‡∏ï‡∏Ñ‡∏≠‡∏•**: Official PTFS Protocol (0xFA/0xFB)
- **‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß**: 115200 bps UART
- **‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á**: Moving Average Filter 30 samples
- **‡∏ä‡πà‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î**: 3m-1000m

### 3. ‡∏£‡∏∞‡∏ö‡∏ö BLE
- **‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠**: Auto-reconnection
- **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á**: elevation, distance, quality, mode
- **‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£**: Health monitoring ‡πÅ‡∏•‡∏∞ error handling

### 4. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
- **Health Check**: ‡∏ó‡∏∏‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **Error Handling**: Auto-restart ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏°‡∏≤‡∏Å
- **Memory Management**: Buffer cleanup ‡πÅ‡∏•‡∏∞ monitoring

### 5. ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö
- **‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£**: Roll Independent (‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤)
- **‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥**: Professional-grade IMU processing
- **‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ**: Real-time quality monitoring
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢**: Auto-calibration ‡πÅ‡∏•‡∏∞ error recovery
